CREATE SCHEMA IF NOT EXISTS "realestate";

CREATE  TABLE "realestate".dim_crimerate ( 
	state_id             varchar    ,
	crime_id             numeric  NOT NULL  ,
	avgtheft             numeric    ,
	avgrobbery           numeric    ,
	avgvandalism         numeric    ,
	avgshooting          numeric    ,
	avgarson             numeric    ,
	avgarrest            numeric    ,
	avgassault           numeric    ,
	avgother             numeric    ,
	CONSTRAINT pk_dim_station PRIMARY KEY ( crime_id )
 );

CREATE  TABLE "realestate".dim_housingmarket ( 
	housing_id           integer  NOT NULL  ,
	state_id             varchar    ,
	county_name          varchar    ,
	houseaddress         varchar(100)    ,
	minsaleprice         numeric    ,
	maxsaleprice         numeric    ,
	mediansaleprice      numeric    ,
	averagesaleprice     numeric    ,
	CONSTRAINT pk_dim_sample PRIMARY KEY ( housing_id )
 );

CREATE  TABLE "realestate".dim_location ( 
	location_id          varchar  NOT NULL  ,
	county_fips          integer    ,
	county_name          varchar(100)    ,
	state_id             varchar    ,
	state_name           varchar    ,
	zipcode              numeric    ,
	latitude             numeric    ,
	longitude            numeric    ,
	CONSTRAINT pk_dim_date PRIMARY KEY ( location_id )
 );

CREATE  TABLE "realestate".dim_schoolrating ( 
	school_id            numeric  NOT NULL  ,
	schoolrating         numeric(10,5)    ,
	schoolname           varchar    ,
	county_name          varchar(100)    ,
	state_id             varchar    ,
	CONSTRAINT pk_dim_collection PRIMARY KEY ( school_id )
 );

CREATE  TABLE "realestate".realestate_facts ( 
	fact_id              bigint  NOT NULL  ,
	housing_id           integer  NOT NULL  ,
	crime_id             numeric  NOT NULL  ,
	school_id            numeric  NOT NULL  ,
	location_id          integer  NOT NULL  ,
	county_name          varchar(100)    ,
	state_id             varchar    ,
	saleprice            numeric    ,
	minlivingwage        numeric    ,
	maxlivingwage        numeric    ,
	avglivingwage        numeric    ,
	CONSTRAINT pk_realestate_facts PRIMARY KEY ( fact_id, school_id, housing_id, crime_id, location_id )
 );
