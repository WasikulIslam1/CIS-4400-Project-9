CREATE SCHEMA INSTANCE;

CREATE TABLE realestate_lgl.INSTANCE.dim_crimerate ( 
	state_id string  ,
	crime_id numeric NOT NULL  ,
	avgtheft numeric  ,
	avgrobbery numeric  ,
	avgvandalism numeric  ,
	avgshooting numeric  ,
	avgarson numeric  ,
	avgarrest numeric  ,
	avgassault numeric  ,
	avgother numeric  
 );

ALTER TABLE realestate_lgl.INSTANCE.dim_crimerate ADD PRIMARY KEY ( crime_id )  NOT ENFORCED;

CREATE TABLE realestate_lgl.INSTANCE.dim_housingmarket ( 
	housing_id int64 NOT NULL  ,
	state_id string  ,
	county_name string  ,
	houseaddress string  ,
	minsaleprice numeric  ,
	maxsaleprice numeric  ,
	mediansaleprice numeric  ,
	averagesaleprice numeric  
 );

ALTER TABLE realestate_lgl.INSTANCE.dim_housingmarket ADD PRIMARY KEY ( housing_id )  NOT ENFORCED;

CREATE TABLE realestate_lgl.INSTANCE.dim_location ( 
	location_id string NOT NULL  ,
	county_fips int64  ,
	county_name string  ,
	state_id string  ,
	state_name string  ,
	zipcode numeric  ,
	latitude numeric  ,
	longitude numeric  
 );

ALTER TABLE realestate_lgl.INSTANCE.dim_location ADD PRIMARY KEY ( location_id )  NOT ENFORCED;

CREATE TABLE realestate_lgl.INSTANCE.dim_schoolrating ( 
	school_id numeric NOT NULL  ,
	schoolrating numeric(10,5)  ,
	schoolname string  ,
	county_name string  ,
	state_id string  
 );

ALTER TABLE realestate_lgl.INSTANCE.dim_schoolrating ADD PRIMARY KEY ( school_id )  NOT ENFORCED;

CREATE TABLE realestate_lgl.INSTANCE.realestate_facts ( 
	fact_id int64 NOT NULL  ,
	housing_id int64 NOT NULL  ,
	crime_id numeric NOT NULL  ,
	school_id numeric NOT NULL  ,
	location_id int64 NOT NULL  ,
	county_name string  ,
	state_id string  ,
	saleprice numeric  ,
	minlivingwage numeric  ,
	maxlivingwage numeric  ,
	avglivingwage numeric  
 );

ALTER TABLE realestate_lgl.INSTANCE.realestate_facts ADD PRIMARY KEY ( fact_id, school_id, housing_id, crime_id, location_id )  NOT ENFORCED;
